jQuery((function(e){"use strict";var i,o,t;function d(i,o){e(".js-ocdi-ajax-response").empty(),o.siblings(".js-ocdi-gl-item").fadeOut(500),o.animate({opacity:0},500,"swing",(function(){o.animate({opacity:1},500)})),o.closest(".js-ocdi-gl").find(".js-ocdi-gl-header").fadeOut(500),o.parent().prepend("<h3>"+ocdi.texts.selected_import_title+"</h3>"),o.find(".js-ocdi-gl-import-data").remove();var t=new FormData;t.append("action","ocdi_import_demo_data"),t.append("security",ocdi.ajax_nonce),t.append("selected",i),a(t)}function a(i){e.ajax({method:"POST",url:ocdi.ajax_url,data:i,contentType:!1,processData:!1,beforeSend:function(){e(".js-ocdi-ajax-loader").show()}}).done((function(o){if(void 0!==o.status&&"newAJAX"===o.status)a(i);else if(void 0!==o.status&&"customizerAJAX"===o.status){(t=new FormData).append("action","ocdi_import_customizer_data"),t.append("security",ocdi.ajax_nonce),!0===ocdi.wp_customize_on&&t.append("wp_customize","on"),a(t)}else if(void 0!==o.status&&"afterAllImportAJAX"===o.status){var t;(t=new FormData).append("action","ocdi_after_import_data"),t.append("security",ocdi.ajax_nonce),a(t)}else void 0!==o.message?(e(".js-ocdi-ajax-response").append("<p>"+o.message+"</p>"),e(".js-ocdi-ajax-loader").hide(),e(document).trigger("ocdiImportComplete")):(e(".js-ocdi-ajax-response").append('<div class="notice  notice-error  is-dismissible"><p>'+o+"</p></div>"),e(".js-ocdi-ajax-loader").hide(),e(document).trigger("reycore/ocdi/failed_import"))})).fail((function(i){e(".js-ocdi-ajax-response").append('<div class="notice  notice-error  is-dismissible"><p>Error: '+i.statusText+" ("+i.status+")</p></div>"),e(".js-ocdi-ajax-loader").hide(),e(document).trigger("reycore/ocdi/failed_import")}))}e(".js-ocdi-import-data").on("click",(function(){e(".js-ocdi-ajax-response").empty();var i=new FormData;i.append("action","ocdi_import_demo_data"),i.append("security",ocdi.ajax_nonce),i.append("selected",e("#ocdi__demo-import-files").val()),e("#ocdi__content-file-upload").length&&i.append("content_file",e("#ocdi__content-file-upload")[0].files[0]),e("#ocdi__widget-file-upload").length&&i.append("widget_file",e("#ocdi__widget-file-upload")[0].files[0]),e("#ocdi__customizer-file-upload").length&&i.append("customizer_file",e("#ocdi__customizer-file-upload")[0].files[0]),e("#ocdi__redux-file-upload").length&&(i.append("redux_file",e("#ocdi__redux-file-upload")[0].files[0]),i.append("redux_option_name",e("#ocdi__redux-option-name").val())),e("#ocdi__rey-file-upload").length&&(i.append("redux_file",e("#ocdi__rey-file-upload")[0].files[0]),i.append("redux_option_name","-")),a(i)})),e(".js-ocdi-gl-import-data").on("click",(function(){var i=e(this).val(),o=e(this).closest(".js-ocdi-gl-item");ocdi.import_popup?function(i,o){var t=e("#js-ocdi-modal-content"),d=(ocdi.import_files[i].import_preview_image_url||ocdi.theme_screenshot,""),a=ocdi.import_files[i].import_notice||"",n="",s=e.extend({dialogClass:"wp-dialog",resizable:!1,height:"auto",modal:!0},ocdi.dialog_options,{buttons:[{text:ocdi.texts.dialog_no,click:function(){e(this).dialog("close")}},{text:ocdi.texts.dialog_yes,class:"button  button-primary",click:function(t){
//!! START REY_
e(document).trigger("reycore/ocdi/import_demo",[i,o,e(this),e(t.currentTarget),ocdi.import_files]);
//!! END REY_
}}]});""!==a&&(n='<div class="ocdi__modal-notice">'+a+"</div>");t.prop("title",ocdi.texts.dialog_title),t.html('<p class="ocdi__modal-item-title">'+ocdi.import_files[i].import_file_name+"</p>"+d+n),t.dialog(s)}(i,o):d(i,o)})),i=e(".js-ocdi-gl-item-container").find(".js-ocdi-gl-item"),o="ocdi-is-fadeout",t=function(e){var t=jQuery.Deferred();return function(){var e=jQuery.Deferred();return i.addClass(o),setTimeout((function(){i.removeClass(o).hide(),e.resolve()}),200),e.promise()}().done((function(){!function(e,o){var t=e?'[data-categories*="'+e+'"]':"div";"all"===e&&(t="div"),i.filter(t).show().addClass("ocdi-is-fadein"),setTimeout((function(){i.removeClass("ocdi-is-fadein"),o.resolve()}),200)}(e,t)})),t},e(".js-ocdi-nav-link").on("click",(function(i){i.preventDefault(),e(this).parent().siblings().removeClass("active"),e(this).parent().addClass("active");var o=this.hash.slice(1),d=e(".js-ocdi-gl-item-container");d.css("min-width",d.outerHeight()),t(o).done((function(){d.removeAttr("style")}))})),e(".js-ocdi-gl-search").on("keyup",(function(i){0<e(this).val().length?(e(".js-ocdi-gl-item-container").find(".js-ocdi-gl-item").hide(),e(".js-ocdi-gl-item-container").find('.js-ocdi-gl-item[data-name*="'+e(this).val().toLowerCase()+'"]').show()):e(".js-ocdi-gl-item-container").find(".js-ocdi-gl-item").show()})),e.ocdiGridLayoutImport=function(e,i){d(e,i)}}));
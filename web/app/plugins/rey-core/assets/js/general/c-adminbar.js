!function(e){"use strict";e(document).ready((function(t){e(".qm-refresh-all > .ab-item").on("click",(function(t){t.preventDefault();var a=e(this);a.addClass("--loading"),rey.ajax.request("refresh_all_caches",{cb:function(e){a.removeClass("--loading"),e&&e.success&&(a.text("Reloading page.."),setTimeout((function(){window.location.reload()}),1500))}})})),e(".qm-refresh-css > .ab-item").on("click",(function(t){t.preventDefault();var a=e(this);a.addClass("--loading"),e.ajax({method:"post",url:reyParams.ajaxurl,data:{action:"refresh_dynamic_css",security:reyParams.ajax_url},success:function(e){a.removeClass("--loading"),e?e.success&&(a.text("Reloading page.."),setTimeout((function(){window.location.reload()}),1500)):console.error("Response cannot be retrieved")}})})),e(".qm-refresh-menus > .ab-item").on("click",(function(t){t.preventDefault();var a=e(this);a.addClass("--loading"),e.ajax({method:"post",url:reyParams.ajaxurl,data:{action:"_refresh_menus",security:reyParams.ajax_url},success:function(e){a.removeClass("--loading"),e?e.success&&(a.text("Reloading page.."),setTimeout((function(){window.location.reload()}),1500)):console.error("Response cannot be retrieved")},error:function(e,t,s){a.removeClass("--loading")}})})),e(".qm-refresh-assets > .ab-item, .dev-refresh-assets").on("click",(function(t){t.preventDefault();var a=e(this);a.addClass("--loading"),e.ajax({method:"post",url:reyParams.ajaxurl,data:{action:"_refresh_assets",security:reyParams.ajax_nonce,href:a.attr("href")},success:function(e){a.removeClass("--loading"),e?e.success&&(a.text("Reloading page.."),setTimeout((function(){window.location.reload()}),1500)):console.error("Response cannot be retrieved")},error:function(e,t,s){a.removeClass("--loading")}})})),"undefined"!=typeof rey&&new function(){this.menuItem=null,this.transisentsMenuItemName="wp-admin-bar-rey-dashboardrefreshrefresh_ajax",this.init=function(){rey.hooks.addAction("ajax/flush_transients/names",(e=>{this.setup()})),this.setup()},this.setup=function(){this.menuItem||(this.menuItem=document.getElementById(this.transisentsMenuItemName),this.menuItem||this.createItem(),this.menuItem&&this.handleClick())},this.createItem=function(){var e=document.getElementById("wp-admin-bar-rey-dashboardrefresh-default");e||(e=document.getElementById("wp-admin-bar-rey-dashboard-default"));var t=rey.dom.createEl("li",{attributes:{id:this.transisentsMenuItemName,class:"qm-refresher"},appendTo:e});rey.dom.createEl("a",{attributes:{href:"#"},class:"ab-item",text:"Ajax Cache",appendTo:t}),this.menuItem=document.getElementById(this.transisentsMenuItemName)},this.handleClick=function(){var e=rey.dom.children(this.menuItem,"a");e.length&&e[0].addEventListener("click",(function(e){e.preventDefault();var t=e.currentTarget;t.classList.add("--loading"),Object.keys(sessionStorage).forEach((e=>{0===e.indexOf("rey_ss_")&&sessionStorage.removeItem(e)})),rey.ajax.request("ajax_flush_transients",{params:{cache:!1},cb:function(e){e.success&&(t&&(t.textContent="Reloading page..."),setTimeout((function(){window.location.reload()}),1e3))}})}))},this.init()}}))}(jQuery);
!function(t){"use strict";document.addEventListener("rey-DOMContentLoaded",(function(e){var i;i={gridTypes:["default","masonry","masonry2","metro","scattered","scattered2"],init:function(e){var i=this;this.$pGrid=t(e),this.$pGrid.length&&t.each(this.gridTypes,(function(t,e){i.$pGrid.hasClass("rey-wcGrid-"+e)&&void 0!==i["run_"+e]&&i["run_"+e]()}))},run_masonry:function(){this.doMasonryGrid()},run_masonry2:function(){this.doMasonryGrid()},doMasonryGrid:function(e){var i=e||this.$pGrid,r=!1;void 0!==t.fn.masonry&&(i.hasClass("--prevent-masonry")||(rey.util.imagesLoaded(i,(function(){r?r.masonry("layout"):((r=i.masonry({itemSelector:"li.product",percentPosition:!0,transitionDuration:0,isInitLayout:!1})).on("layoutComplete",(function(){r.addClass("--msnry-initialised")})),r.masonry(),r[0].dispatchEvent(new CustomEvent("rey/masonry",{detail:r})))})),rey.hooks.addAction("product/loaded",(function(e){r&&e.length&&t(e[0].parentNode).is(r)&&r.masonry("appended",e)})),rey.hooks.addAction("view_selector/change_cols",(function(){r&&r.masonry()}))))},run_scattered:function(){this.doScattered()},run_scattered2:function(){this.doScattered("mixed")},doScattered:function(e){var i=this;if(!this.$pGrid.hasClass("--prevent-scattered")){this.$products=t("li.product",this.$pGrid);var r=function(t){"mixed"!==e?t.addClass("scGrid-offset"):t.addClass("scGrid-offset-"+rey.util.getRandomInt(8))};if(reyParams.js_params.scattered_grid_custom_items&&reyParams.js_params.scattered_grid_custom_items.length)t.each(reyParams.js_params.scattered_grid_custom_items,(function(e,n){r(t("li.product.post-"+n,i.$pGrid))}));else{var n=reyParams.js_params.scattered_grid_max_items||7;this.$products.sort((function(){return.5-Math.random()})).slice(0,n).each((function(e,i){r(t(i))}))}}},run_metro:function(){}},t(".rey-siteMain ul.products").each((function(t,e){Object.create(i).init(e)})),rey.hooks.addAction("ajaxfilters/finished",(function(e){Object.create(i).init(t("ul.products",e))})),{key:"reycore/infinite",cleanup_key:"reycore/infinite_cleanup",$grid:t("ul.products.--paginated.--infinite"),init:function(){rey.vars.adminBar||reyParams.js_params.infinite_cache&&("true"===localStorage.getItem(this.cleanup_key)&&(localStorage.removeItem(this.cleanup_key),sessionStorage.removeItem(this.key)),this.run(),this.events())},run:function(){this.currentData=JSON.parse(sessionStorage.getItem(this.key)),null!==this.currentData&&this.$grid.length&&(this.currentData.url!==window.location.href?sessionStorage.removeItem(this.key):(this.$grid.html(this.currentData.content),t(document).trigger("rey/infinite/refresh",[this.$grid[0]]),rey.hooks.doAction("infinite/refresh",this.$grid[0])))},events:function(){var e=this;rey.hooks.addAction("product/loaded",(function(i){var r=e.$grid.html();r&&t.each({"is-animated-entry":"","splide--ltr splide--draggable is-active":"","is-active is-visible":"","opacity: 0;":""},(function(t,e){r=r.replaceAll(t,e)}));var n={url:window.location.href,content:r};sessionStorage.setItem(e.key,JSON.stringify(n))})),rey.hooks.addAction("ajaxfilters/finished",(function(){sessionStorage.removeItem(e.key)}))}}.init()}))}(jQuery);
!function(e,t){"use strict";if(void 0!==e){e.Previewer.prototype.ready=function(t){var a=this,i={};i.settings=e.get(),i["settings-modified-while-loading"]=a.settingsModifiedWhileLoading,("resolved"!==a.deferred.active.state()||a.loading)&&(i.scroll=a.scroll),i["edit-shortcut-visibility"]=e.state("editShortcutVisibility").get(),a.send("sync",i),t.currentUrl&&(a.previewUrl.unbind(a.refresh),a.previewUrl.set(t.currentUrl),a.previewUrl.bind(a.refresh)),t.settingValidities&&e._handleSettingValidities({settingValidities:t.settingValidities,focusInvalidControl:!1})};var a={"tooltips-handler":wp.template("rey-customizer-tooltips-handler"),"new-content-handler":wp.template("rey-customizer-new-page")},i=function(e){var i=this;this.init=function(){this.options=t.extend({$target:"",id:"",placeholder:"",button_text:"",new_link:"",action:"",params:{},edit_link:"",$list:"",cb:function(e,t){}},e),this.options.$target&&(this.addContentForm(),this.events())},this.events=function(){this.$newButton.on("click",(function(e){e.preventDefault(),i.$form.toggleClass("--visible")})),this.options.edit_link&&(this.options.$list&&this.options.$list.on("change",(function(e){i.$editButton.attr("data-id",e.target.value)})),this.$editButton.on("click",(function(e){e.preventDefault(),window.open(t(this).attr("data-url")+t(this).attr("data-id"),"_blank").focus()}))),t(".__add",this.$form).on("click",(function(e){e.preventDefault(),i.$form.addClass("--loading");var a=t(".__input",i.$form),n=a.val(),o=t.extend({title:n},i.options.params);rey.ajax.request(i.options.action,{data:o,cb:function(e){if(e&&e.success){if(i.$form.removeClass("--loading"),!e.data)return console.error("Failed to create page!");i.options.cb(e.data,n),i.options.edit_link&&i.$editButton.attr("data-id",e.data),i.$form.removeClass("--visible"),a.val("")}}})}))},this.addContentForm=function(){var e=(0,a["new-content-handler"])({id:this.options.id,placeholder:this.options.placeholder,button_text:this.options.button_text,new_link:this.options.new_link,edit_link:this.options.edit_link,selected_id:this.options.$list.val()}),i=t(e).appendTo(this.options.$target);this.$form=t(".__form",i),this.$newButton=t(".__add-link",i),this.options.edit_link&&(this.$editButton=t(".__edit-link",i))},this.init()},n=function(a){var n=this;this.init=function(){this.control=a,this.$container=this.control.container,this.$wrapper=t(".rey-control-wrap",this.$container),this.$choices=t('.rey-radio-choices input[type="radio"]',this.$container),this.$listContainer=t(".rey-gs-list",this.$container),this.$list=t("select",this.$listContainer),this.$field=t('input[type="hidden"]',this.$container),this.addNewPage(),this.setValue(),this.events()},this.addNewPage=function(){var e=this.$listContainer,a=t(".description.--none-existing",this.$container);a.length&&(e=a),new i({$target:e,id:this.$wrapper.attr("data-id"),placeholder:this.$wrapper.attr("data-placeholder"),button_text:this.$wrapper.attr("data-button-text"),new_link:this.$wrapper.attr("data-new-link"),edit_link:this.$wrapper.attr("data-edit-link"),$list:this.$list,action:"create_new_gs",params:{type:this.$wrapper.attr("data-type")},cb:this.handleNewPage})},this.handleNewPage=function(e,a){t("option:selected",this.$list).removeAttr("selected"),t('<option value="'+e+'" selected>'+a+"</option>").appendTo(this.$list).trigger("change")},this.setValue=function(){"undefined"!==this.control.params.choices.global_sections&&Object.keys(this.control.params.choices.global_sections).length&&"gs"===t('.rey-radio-choices input[type="radio"]:checked',this.$container).val()&&(this.control.params.value in this.control.params.choices.global_sections||e(this.control.id,(function(e){e.set(Object.keys(n.control.params.choices.global_sections)[0])})))},this.isGs=function(e){return"none"!==e&&"default"!==e},this.updateField=function(e){this.$field.val(e).trigger("change")},this.events=function(){this.$choices.on("change",(function(e){n.$listContainer.toggleClass("--active",n.isGs(e.target.value)),n.isGs(e.target.value)?n.updateField(n.$list.val()):n.updateField(e.target.value)})),this.$list.on("change",(function(e){var t=e.target.value;n.updateField(t)}))},this.init()};e.control.bind("add",(function(e){e.params&&("number"===e.params.type&&e.container.addClass("--wrapped").wrapInner('<div class="control-wrap" />'),"rey-hf-global-section"===e.params.type&&new n(e))}));t(document).on("click",(function(e){t(e.target).closest(".wrapper.--active").length||t(".rey-cstTypo-btn.--active").length&&(t(".rey-cstTypo-btn").removeClass("--active"),t(".customize-control-kirki-typography .wrapper").removeClass("--active"))})),t(document).on("click",".rey-cstTypo-btn",(function(e){e.preventDefault();var a=t(this);a.hasClass("--active")||setTimeout((function(){a.addClass("--active"),a.closest(".customize-control-kirki-typography").find(".wrapper").addClass("--active")}),100)}));var o=function(e){this.init=function(){this.control=e,this.settings=this.control.params.help,t(".rey-csTitleHelp-popWrapper",this.control.container).length||this.make()},this.make=function(){a["tooltips-handler"]&&(t.isEmptyObject(this.settings)||(this.$label=t(".customize-control-title",this.control.container),this.$label.length&&this.$label.html(a["tooltips-handler"](this.settings))))},this.init()};t(document).ready((function(){t("#customize-theme-controls");var a=[],i=function(e){if(-1===a.indexOf(e.id)){a.push(e.id),t(document).trigger("reycore/customizer/section_expanded",[e]);var i=e.container,n=(e.contentContainer,e.controls());t.each(n,(function(e,a){"kirki-typography"===a.params.type&&function(e){var a=e.container;if(t('[data-should-collapse="no"]',a).length)a.addClass("--simple");else if(!t(".rey-cstTypo-wrapper",a).length){var i=t(".wrapper",a),n=t(".font-family select",i),o=t(".font-size input",i),r=t(".variant select",i),s=wp.template("rey-customizer-typo-handler"),c=a.prepend(s({ff:t('option[value="'+n.val()+'"]',n).text(),fz:o.val(),fw:r.val()}));n.on("change",(function(e){var a=t('option[value="'+t(this).val()+'"]',this).text();t(".rey-cstTypo-ff",c).text(a)})),o.on("change",(function(e){var a=t(this),i=a.val(),n=a.parent();n.removeClass("--invalid"),i&&(isNaN(i)||(n.addClass("--invalid"),a.val(parseInt(i)+"px")),t(".rey-cstTypo-fz",c).text(i))})),r.on("change",(function(e){t(".rey-cstTypo-fw",c).text(t(this).val())})),t(document).on("keyup",(function(e){27==e.keyCode&&i.removeClass("--active")}))}}(a),void 0!==a.params.help&&new o(a),a.params.css_class&&a.container.addClass(a.params.css_class),a.params.separator&&a.container.addClass("--separator-"+a.params.separator)})),t(".customize-control [data-control-class]",i).each((function(){var e=t(this);e.closest(".customize-control").addClass(e.attr("data-control-class"))})),t(".customize-control-rey_group_start",i).each((function(e,a){var i=t(a);i.wrapInner("<div class='__inner-group'></div>").addClass("--is-grouped"),i.nextUntil(".customize-control-rey_group_end").wrapInner("<div class='__inner-group'></div>").addClass("--is-grouped"),i.nextAll(".customize-control-rey_group_end").addClass("--is-grouped")}))}};e.section.each((function(e){e.expanded.bind((function(a){a&&(!function(e){if(document.getElementById("tmpl-rey-lock-overlay")&&!t(".rey-lockOverlay",e.contentContainer).length){var a=t(".customize-section-description-container",e.contentContainer).outerHeight()||0;e.contentContainer[0].style.setProperty("--desc-height",a+"px"),e.contentContainer.append(wp.template("rey-lock-overlay")()),e.containerParent.addClass("lk-controls")}}(e),i(e))}))}));var n={panel:e.settings.panels,section:e.settings.sections};t.each({panel:{nav_menus:"menus",widgets:"widgets"},section:{custom_css:"additional-css","cei-section":"export-import",static_front_page:"homepage-settings","sidebar-widgets-shop-sidebar":"widgets-shop-sidebar","sidebar-widgets-filters-sidebar":"widgets-filter-panel","sidebar-widgets-filters-top-sidebar":"widgets-filter-top-bar"}},(function(e,a){t.each(a,(function(t,a){n[e][t]={icon:a}}))})),t.each(n,(function(e,a){t.each(a,(function(a,i){i.icon&&function(e,a,i){var n='<svg class="rey-icon" role="img"><use href="#cs-icon-'+a+'" xlink:href="#cs-icon-'+a+'"></use></svg>',o=t(`#accordion-${i=i||"panel"}-${e} h3.accordion-section-title .accordion-trigger`);o.length||(o=t(`#accordion-${i}-${e} h3.accordion-section-title`)),o.prepend(n)}(a,i.icon,e)}))}));var r=e.control,s=t(".wp-full-overlay"),c=[];r.each((function(a){if(a.params&&void 0!==a.params.required&&a.params.required.length&&t(a.container).addClass("--conditioned"),a.params&&void 0!==a.params.is_responsive){var i=t(a.container),n=a.params.is_responsive,o=a.params.required&&a.params.required.length;n&&o&&c.push(a),i.attr("data-breakpoint",n);var r=function(){var e="desktop";return t.each(["desktop","tablet","mobile"],(function(t,a){s.hasClass("preview-"+a)&&(e=a)})),e};o&&t.each(a.params.required,(function(t,o){e(o.setting,(function(e){e.bind((function(e){kirkiDependencies.showKirkiControl(a)&&r()!==n&&setTimeout((function(){i.css("display","none")}),50)}))}))}));var l=function(e,i){var n=".rey-cst-responsiveHandlers";i===r()?o&&kirkiDependencies.showKirkiControl(a)&&e.css("display","list-item"):e.css("display","none");var s=t(n,e);if(!s.length){var c=wp.template("rey-customizer-responsive-handler");s=e.prepend(c({device:i})),t("span[data-breakpoint]",s).on("click",(function(e){e.preventDefault();var a=t(this),i=a.attr("data-breakpoint"),o=t('.wp-full-overlay-footer .devices button[data-device="'+i+'"]'),r=t("#customize-theme-controls"),s=a.closest(".customize-control").attr("id").replace("_tablet","").replace("_mobile","");a.parent().hasClass("--active")&&a.closest(".wp-full-overlay").hasClass("preview-"+i)&&a.closest(".customize-control").is("[data-breakpoint='"+i+"']")?(t(n).removeClass("--active"),r.removeClass("--active")):(t(n).removeClass("--active"),t.each(["","_tablet","_mobile"],(function(e,a){t("#"+s+a).children(n).addClass("--active")})),r.addClass("--active")),o.length&&o.trigger("click")}))}};e.section(a.section(),(function(e){e.expanded()||wp.customize.settings.autofocus.control===a.id?l(i,n):e.expanded.bind((function(e){e&&l(i,n)}))}))}if(a.params&&"number"===a.params.type){var d=function(e){e.hasClass("--wrapped")||e.addClass("--wrapped").wrapInner('<div class="control-wrap" />')};e.section(a.section(),(function(e){e.expanded()||wp.customize.settings.autofocus.control===a.id?d(a.container):e.expanded.bind((function(e){e&&d(a.container)}))}))}})),t(document).on("click","#customize-theme-controls.--active",(function(e){e.target.closest(".rey-cst-responsiveHandlers")||document.querySelectorAll(".rey-cst-responsiveHandlers").forEach((e=>{e.classList.remove("--active")}))})),t('a[href="#autofocus-control"]').on("click",(function(a){a.preventDefault();var i=t(this).attr("data-control");if(i){var n=e.control(i);n.focus(),setTimeout((function(){"rey_accordion_start"!==n.params.type||n.container.hasClass("--acc-open")||n.container.trigger("click")}),200)}})),t(".customize-control-rey_accordion_start").on("click",(function(e){e.preventDefault();var a=t(this),i=a.hasClass("--acc-open");a.removeClass("--acc-open"),a.siblings(".--is-accordion:not(.customize-control-rey_accordion_start)").addClass("--acc-hidden"),a.siblings(".customize-control-rey_accordion_start").removeClass("--acc-open"),i||(a.addClass("--acc-open"),a.nextUntil(".customize-control-rey_accordion_end").removeClass("--acc-hidden"))})),t(".wp-full-overlay-footer .devices button").on("click",(function(){var e=t(this).attr("data-device");t(".customize-control[data-breakpoint]:not(.--conditioned)",s).css("display","none"),t('.customize-control[data-breakpoint="'+e+'"]:not(.--conditioned)',s).css("display","list-item"),t.each(c,(function(a,i){var n=t(i.container);n.css("display","none"),kirkiDependencies.showKirkiControl(i)&&n.attr("data-breakpoint")==e&&n.css("display","list-item")}))})),t(".js-rey-button[data-ajax-action]").on("click",(function(e){var a=t(this),i=a.attr("data-ajax-action")||"";i&&(e.preventDefault(),a.addClass("--loading disabled"),t.post({url:reyCoreAdmin.ajax_url,data:{action:i,security:reyCoreAdmin.ajax_nonce},success:function(e){a.removeClass("--loading"),e.data&&a.text(e.data)}}))})),t(document).on("click","#accordion-section-woo-header-cart",(function(t){t.preventDefault(),e.section("header-mini-cart").focus()})),"undefined"!=typeof _wpCustomizeSettings&&_wpCustomizeSettings.theme.stylesheet&&s.attr("data-theme",_wpCustomizeSettings.theme.stylesheet),t(".js-rey-button[data-action='rey_transfer_mods']").on("click",(function(e){var a=t(this),i=a.attr("data-action"),n=a.attr("data-default");(e.preventDefault(),i&&n)&&(confirm("Are you sure you want to override the settings? Also, please export your current settings first.")&&(a.addClass("--loading disabled"),t.post({url:reyCoreAdmin.ajax_url,data:{action:i,type:n,security:reyCoreAdmin.ajax_nonce},success:function(e){e&&e.success&&(a.text("Reloading page.."),setTimeout((function(){window.location.reload()}),1e3)),a.removeClass("--loading disabled")},error:function(e,t,a){console.error(e),console.error(t),console.error(a)}})))}));var l=t("#customize-control-custom_image_height"),d=t('input[name="woocommerce_thumbnail_cropping"]');"uncropped"!==d.val()&&l.slideUp(),d.on("change",(function(e){"uncropped"===e.target.value?l.slideDown():l.slideUp()}))}));var r=function(){var a="reycore-preview-disabled",i=rey.util.ls.get(a)&&!0===rey.util.ls.get(a),n=t("#customize-preview"),o=n.parent(),s="Hide Preview",c="Show Preview";t("iframe",n).length?(i&&n.length&&(o.addClass("--preview-disabled"),n.remove()),t('<button type="button" class="button button-secondary js-disable-preview '+(i?"--disabled":"")+'"><span>'+(i?c:s)+"</span></button>").prependTo("#customize-save-button-wrapper"),t(document).on("click",".js-disable-preview",(function(e){e.preventDefault();var i=t(this);if(i.hasClass("--disabled")){i.removeClass("--disabled"),localStorage.removeItem(a);var r=n.appendTo(o),l=t("iframe",r);l.attr("src",l.attr("data-src")),o.removeClass("--preview-disabled"),t("span",i).text(s)}else i.addClass("--disabled"),rey.util.ls.set(a,!0,18144e6),n.remove(),o.addClass("--preview-disabled"),t("span",i).text(c)})),_.each(["panel","section","control"],(function(t){if(i){var a=e.settings.autofocus[t];a&&e[t](a,(function(e){"control"===t&&e.deferred.embedded.resolve(),e.deferred.embedded.done((function(){e.focus()}))}))}}))):setTimeout((function(){r()}),500)};r(),e.controlConstructor["rey-title"]=e.Control.extend({ready:function(){this.template(this)},template:function(e){var t=wp.template("rey-title");e.container.html(t({label:e.params.label,description:e.params.description,id:e.id,titleArgs:e.params.titleArgs}))}}),e.controlConstructor["rey-color"]=e.Control.extend({ready:function(){this.globalIsInit=!1,this.template(this),this.initPicker()},initVars:function(e){this.globalIsInit||(this.$pickerContainer=t(e).closest(".wp-picker-container"),this.$pickerButton=t(".wp-color-result",this.$pickerContainer),this.$globalButton=t(".rey-colorGlobal",this.container),this.$globalPop=t(".rey-colorGlobal-pop",this.container),this.globalIsInit=!0,this.isActiveGlobal()&&this.$globalButton.addClass("--active"),this.events())},isActiveGlobal:function(){return-1!==this.setting._value.indexOf("var")},getColorCode:function(){return t('.__item[data-color-var="'+this.setting._value+'"]',this.$globalPop).attr("data-color")||this.setting._value},initPicker:function(){var e=this;this.$picker=t(".rey-color-control",this.container),this.$picker.wpColorPicker({palettes:!1,create:function(a){e.initVars(a.target),e.isActiveGlobal()&&t(".color-alpha",e.$pickerButton).css("background-color",e.getColorCode())},change:_.debounce((function(t){e.isActiveGlobal()||e.saveValue(e.$picker.val(),!0),e.checkEmpty()}),400),clear:function(t){e.saveValue(e.$picker.val(),!0),e.checkEmpty()}})},checkEmpty:function(){this.$pickerButton.toggleClass("--empty",!this.getColorCode())},events:function(){var e=this;this.$pickerButton.on("click",(function(){e.$globalButton.removeClass("--active"),e.isActiveGlobal()&&e.saveValue(e.getColorCode())})),this.$globalButton.on("click",(function(){t(".rey-colorGlobal-pop").removeClass("--active"),e.$globalPop.addClass("--active")})),t(".rey-colorGlobal-popClose",this.$globalPop).on("click",(function(){e.$globalPop.removeClass("--active")})),t(".__item",this.$globalPop).on("click",(function(){var a=t(this),i=a.attr("data-color"),n=a.attr("data-color-var");e.saveValue(n),t(".color-alpha",e.$pickerButton).css("background-color",i),e.$globalButton.addClass("--active"),e.$globalPop.removeClass("--active"),e.checkEmpty()}))},saveValue:function(e,t){t||this.$picker.attr("value",e).wpColorPicker("color",e),this.setting.set(e)},template:function(e){var t=wp.template("rey-color-markup");e.container.html(t({label:e.params.label,description:e.params.description,"data-id":e.id,mode:e.params.mode,inputAttrs:e.params.inputAttrs,"data-default-color":e.params.default,"data-alpha":e.params.choices.alpha,value:kirki.setting.get(e.id)}))}}),e.controlConstructor["rey-select"]=e.Control.extend({ready:function(){this.$list=t(".rey-control-select",this.container),this.initSelect()},initSelect:function(){var e=t('select[id="_customize-input-'+this.id+'"]',this.$list),a=this,i=parseInt(e.attr("data-multiple"),10)||1,n={escapeMarkup:function(e){return e}};this.params.query_args&&(n.ajax={url:reyCoreAdmin.ajax_url,data:function(e){return{q:e.term,query_args:a.params.query_args,action:"rey_select_control_filter_autocomplete",security:reyCoreAdmin.ajax_nonce}},delay:250,cache:!0},n.minimumInputLength=2),this.params.placeholder&&(n.placeholder=this.params.placeholder,n.allowClear=!0),1<i&&(n.maximumSelectionLength=i,n.multiple=!0),t(e).select2(n)}}),"undefined"!=typeof kirki&&kirki&&(t.extend(kirki.input,{select:{init:function(e){this.ajax_choices=!(!e.params.ajax_choices||""===e.params.ajax_choices)&&e.params.ajax_choices,this.query_args=!(!e.params.query_args||t.isEmptyObject(e.params.query_args))&&e.params.query_args,(void 0===e.params.select2||!1!==e.params.select2||this.ajax_choices||this.query_args)&&(this.$list=t("select",e.container),this.initAjaxControl(e),this.initEditPreview(e),this.addNewPage(e))},initEditPreview:function(e){if(e.params.edit_preview){var a=e.setting.get(),i='<div class="rey-editPreview"><a href="'+reyCoreAdmin.site_url+'/wp-admin/post.php?post={{ID}}&action=edit" target="_blank" title="Click to edit this Global section with Elementor">Edit</a><div class="rey-previewIframe" data-id="{{ID}}"><a href="'+reyCoreAdmin.site_url+'/?p={{ID}}" target="_blank">Preview</a><div class="rey-previewIframe-holder"><iframe data-src="'+reyCoreAdmin.site_url+'/?p={{ID}}&admin_bar=0" frameborder="0" scrolling="no"></iframe></div></div></div>',n=function(a){var n="no"===a||"none"===a||"disabled"===a||""===a||isNaN(a);t(".rey-editPreview",e.container).remove(),n||t(i.replace(/{{ID}}/g,a)).prependTo(e.container.find(".kirki-input-container"))};n(a),this.$list.on("change",(function(e){n(e.target.value)}))}},initAjaxControl:function(a,i){var n=!1;i=i||'select[data-id="'+a.id+'"]';var o=parseInt(t(i).data("multiple")||10),r={escapeMarkup:function(e){return e}},s=function(){var e=t(this).val();e=null===e&&1<o?[]:e,a.setting.set(e)};if(a.params.placeholder&&(r.placeholder=a.params.placeholder,r.allowClear=!0),1<o&&(r.maximumSelectionLength=o),this.ajax_choices){var c=this.ajax_choices,l={};"object"==typeof this.ajax_choices&&(c=this.ajax_choices.action,l=this.ajax_choices.params),rey.ajax.request(c,{data:l,cb:function(e){if(e&&e.success&&e.data){var n=[];t.each(e.data,(function(e,t){var i=e===(a.params.value||a.params.default);n.push(new Option(t,e,i,i))})),t(i).append(n).trigger("change")}}})}else if(this.query_args){if(r.ajax={url:reyCoreAdmin.ajax_url,data:function(e){return{q:e.term,query_args:a.params.query_args,action:"rey_select_control_filter_autocomplete",security:reyCoreAdmin.ajax_nonce}},delay:250,cache:!0},r.minimumInputLength=2,!n){var d=e(a.id).get(),p=this.query_args,u=t(i).closest(".customize-control");return u.addClass("--ajax"),t.isEmptyObject(d)||t.isEmptyObject(p)?void t(i).selectWoo(r).on("change",s):(u.addClass("--loading"),void t.post({url:reyCoreAdmin.ajax_url,data:{query_args:p,values:d,action:"rey_select_control_value_titles",security:reyCoreAdmin.ajax_nonce},success:function(e){n=!0,r.data=[],!e||"object"!=typeof e||t.isEmptyObject(e)||e.error||_.each(e,(function(e,t){r.data.push({id:t,text:e,selected:!0})})),t(i).selectWoo(r).on("change",s),u.removeClass("--loading")}}))}}else a.params.multiple&&1===a.params.multiple&&!(a.params.value in a.params.choices)&&e(a.id,(function(e){e.set(a.params.default)}));t(i).selectWoo(r).on("change",s)},addNewPage:function(e){var a=!!e.params.new_page&&e.params.new_page;a&&new i({$target:t(".kirki-input-container",e.container),id:this.$list.attr("data-id"),placeholder:a.placeholder||"",button_text:a.button_text||"",new_link:a.new_link||"",$list:this.$list,action:"create_new_page",cb:this.handleNewPage})},handleNewPage:function(e,a){t(this.$list).append(new Option(a,e,!0,!0)).trigger("change")}}}),e.controlConstructor.repeater=e.controlConstructor.repeater.extend({ready:function(){var e=this;!_.isUndefined(window.kirkiControlLoader)&&_.isFunction(kirkiControlLoader)?kirkiControlLoader(e):e.initKirkiControl(),this.initDependencies(e),this.initCssClasses(e)},initCssClasses:function(e){if(!e.type||"repeater"!==e.type){var a=function(a){if(e.params.fields){var i=e.params.fields;t.isEmptyObject(i)||(a=a||e.container,t.each(i,(function(e,i){if(i.condition&&!t.isEmptyObject(i.condition)){var n=t(".repeater-field.repeater-field-"+e,a);i.css_class&&n.addClass(i.css_class)}})))}};a(),e.container.on("row:new",(function(e,t){a(t.container)}))}},initDependencies:function(e){if("undefined"!=typeof kirkiDependencies&&(!e.type||"repeater"!==e.type)&&e.params.fields&&!t.isEmptyObject(e.params.fields)){var a=function(a){a=a||t(".repeater-row",e.container),t.each(e.params.fields,(function(e,i){if(i.condition){var n=i.condition;if(!t.isEmptyObject(n)){var o=t(".repeater-field.repeater-field-"+e,a),r=[];t.each(n,(function(e,i){var n=t('[data-field="'+i.setting+'"]',a),o=n.val();n.is('[type="checkbox"]')&&(o=n.prop("checked"));var s=kirkiDependencies.evaluate(i.value,o,i.operator);r.push(s)}));var s=r.every((function(e){return!0===e}));o.toggleClass("hidden",!s)}}}))};a(),t(e.container).on("change","input, select",(function(e){a(t(this).closest(".repeater-row"))})),e.container.on("row:new",(function(e,t){a(t.container)}))}},initSelect:function(e,a){var i=this,n=[],o=function(){e.container.find(".repeater-field select").each((function(o,r){var s=t(r),c=s.attr("data-field"),l=s.attr("data-multiple")||0,d={};l&&(d.maximumSelectionLength=parseInt(l),s.closest(".repeater-field-select").addClass("--multiple")),(a=a||{})[c]=a[c]||"";var p=i.params.fields[c],u=p.query_args||{};if(t.isEmptyObject(u))l&&t(r).selectWoo(d).val(t(r).val());else{s.closest(".repeater-field-select").addClass("--ajaxfield"),n[e.rowIndex]=!1;var h={escapeMarkup:function(e){return e}};if(p.placeholder&&(h.placeholder=p.placeholder,h.allowClear=!0),1<l&&(h.maximumSelectionLength=l),h.ajax={url:reyCoreAdmin.ajax_url,data:function(e){return{q:e.term,query_args:u,action:"rey_select_control_filter_autocomplete",security:reyCoreAdmin.ajax_nonce}},delay:250,cache:!0},h.minimumInputLength=2,!n[e.rowIndex]){var m=a[c]||{},f=s.closest(".repeater-field");if(!t.isEmptyObject(m))return f.addClass("--ajax --loading"),void t.post({url:reyCoreAdmin.ajax_url,data:{query_args:p.query_args,values:m,action:"rey_select_control_value_titles",security:reyCoreAdmin.ajax_nonce},success:function(a){n[e.rowIndex]=!0,h.data=[],a&&"object"==typeof a&&!t.isEmptyObject(a)&&_.each(a,(function(e,t){h.data.push({id:t,text:e,selected:!0})})),t(r).selectWoo(h).val(t(r).val()),f.removeClass("--loading")}})}t(r).selectWoo(h).val(t(r).val())}}))};o(),e.container.on("click",".repeater-row-header",(function(e){!t(this).closest(".repeater-row").hasClass("minimized")&&o()})),i.container.on("change",".repeater-field select",(function(e){var a=t(e.target),n=a.closest(".repeater-row").data("row"),o=i.getValue();o[n][a.data("field")]=t(this).val(),i.setValue(o)}))},initAjaxSelect:function(a){var i=!1;selector=selector||'select[data-id="'+a.id+'"]';var n=parseInt(t(selector).data("multiple"),10),o={escapeMarkup:function(e){return e}},r=function(){var e=t(this).val();e=null===e&&1<n?[]:e,a.setting.set(e)};if(a.params.placeholder&&(o.placeholder=a.params.placeholder,o.allowClear=!0),1<n&&(o.maximumSelectionLength=n),a.params.query_args&&!t.isEmptyObject(a.params.query_args)&&(o.ajax={url:reyCoreAdmin.ajax_url,data:function(e){return{q:e.term,query_args:a.params.query_args,action:"rey_select_control_filter_autocomplete",security:reyCoreAdmin.ajax_nonce}},delay:250,cache:!0},o.minimumInputLength=2,!i)){var s=e(a.id).get(),c=a.params.query_args,l=t(selector).closest(".customize-control");if(!s||!c)return;return l.addClass("--ajax --loading"),void t.post({url:reyCoreAdmin.ajax_url,data:{query_args:c,values:s,action:"rey_select_control_value_titles",security:reyCoreAdmin.ajax_nonce},success:function(e){i=!0,o.data=[],e&&"object"==typeof e&&!t.isEmptyObject(e)&&_.each(e,(function(e,t){o.data.push({id:t,text:e,selected:!0})})),t(selector).selectWoo(o).on("change",r),l.removeClass("--loading")}})}t(selector).selectWoo(o).on("change",r)}}))}}(wp.customize,jQuery);
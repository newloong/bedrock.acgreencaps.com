!function(t){"use strict";var i=function(i){var a=function(i){this.$variation=t(i),this.$product=this.$variation.closest("li.product"),this.$btn=this.$product.find("a[data-product_id]"),this.btnLink=this.$btn.attr("href"),this.init=function(){this.type=this.$variation.attr("data-attribute-type"),this.variationsData=JSON.parse(this.$variation.attr("data-product_variations")||"{}"),this.attributeName=this.$variation.attr("data-attribute-name"),this.isPlaceholder=t(".woocommerce-placeholder",this.$product).length,this.events(),this.findDisableds(),this.isPlaceholder&&t("ul li.--active",this.$variation).trigger("click")},this.events=function(){var i=this;"select"!==this.type?this.$variation.on("click","li",(function(a){if(a.preventDefault(),!i.$variation.hasClass("--prevent-click")){var e=t(a.currentTarget),r=e.children().attr("data-slug");e.siblings().removeClass("--active"),e.addClass("--active"),i.doChanges(r)}})):this.$variation.on("change","select",(function(a){a.preventDefault();var e=t(a.currentTarget).val();i.doChanges(e)}))},this.doChanges=function(t){var i=this.matchVariation(t);i&&(this.changePrice(i),this.changeThumb(i),this.changeUrl(i))},this.findDisableds=function(){var i=this;t.each(this.variationsData,(function(t,a){if("variation_is_visible"in a&&!1===a.variation_is_visible&&"attributes"in a&&i.attributeName in a.attributes){var e="--disabled";!0===a.hidden&&(e="--hidden");var r=a.attributes[i.attributeName];i.$variation.find('li span[data-slug="'+r+'"]').parent().addClass(e)}}))},this.matchVariation=function(i){var a=this,e=!1;return t.each(this.variationsData,(function(t,r){"attributes"in r&&a.attributeName in r.attributes&&r.attributes[a.attributeName]===i&&(e=r)})),e},this.changePrice=function(t){if("price_html"in t&&""!==t.price_html){var i=this.$variation.closest("li.product").find(".price");i.length&&i.replaceWith(t.price_html)}},this.changeUrl=function(i){if(this.$btn.length){var a="";if("attributes"in i&&t.each(i.attributes,(function(t,i){i&&(""!==a&&(a+="&"),a+=t+"="+i)})),""!==a){var e=-1!==this.btnLink.indexOf("?")?"&":"?",r=this.btnLink+e+a;this.$btn.attr("href",r);var n=t(".woocommerce-loop-product__link",this.$product);n.length&&n.attr("href",r)}}},this.changeThumb=function(i){if("image_src"in i&&"object"==typeof i.image_src){var a=this.$variation.closest("li.product").find(".rey-productThumbnail .woocommerce-loop-product__link .rey-thumbImg").first();if(a.length){var e=a.attr("src");if(e===i.image_src[0])return;var r=a.attr("srcset")||"";r=r.replace(e,i.image_src[0]);var n=a.attr({src:i.image_src[0],srcset:""}).css("opacity",.2),s=a.parent();a.remove(),n.prependTo(s).on("load",(function(){var i=t(this);i.closest("li.product").removeClass("--extraImg-second"),i.css({opacity:1,"transition-duration":"700ms"}).nextAll("img, picture").remove()}))}}},this.init()};t(".rey-productVariations",t(i||document)).each((function(t,i){new a(i)}))};document.addEventListener("rey-DOMContentLoaded",(function(t){i()})),rey.hooks.addAction("product/loaded",(function(t){i(t)}))}(jQuery);
!function(){"use strict";var t=function(t){this.modal=null,this.selectedAttributes={},this.createdVariationData=!1,this.rqModal=null,this.id=0,this.selectLists=[],this.init=function(){"undefined"!=typeof reycoreRequestQuoteParams&&(this.modalTemplate=rey.template("rey-request-quote-modal"),this.modalTemplate&&(this.variationsSetButtonState(),this.events()))},this.events=function(){t.addEventListener("click",(e=>{e.preventDefault(),this.id=t.getAttribute("data-id")||0,this.setupModal(),this.handleCatalogButton()||("undefined"!=typeof reycoreRequestQuoteParams&&reycoreRequestQuoteParams.variation_aware&&t.classList.contains("--disabled")?window.alert(reycoreRequestQuoteParams.disabled_text):this.open())})),"undefined"!=typeof jQuery&&jQuery(document).on("woocommerce_update_variation_values","div.product .variations_form",(t=>{this.updateVariationData()}))},this.setupModal=function(){this.rqModal||(this.modalContent=this.modalTemplate({id:this.id,title:t.getAttribute("data-title"),sku:t.getAttribute("data-sku")}),"undefined"!=typeof ReyModal&&(this.rqModal=new ReyModal({linkAttributeName:!1,catchFocus:!1,closeOnEsc:!0,backscroll:!0,beforeOpen:t=>{this.beforeOpen(t)}}),this.rqModal.init()))},this.beforeOpen=function(t){this.modal||(this.modal=t.$content.querySelector(".rey-requestQuote-modal"),this.modal&&(this.modalForm=this.modal.querySelector("form"),this.modalForm&&(this.modalForm.append(rey.dom.createElementFromHTML('<input type="hidden" name="rey-request-quote-product-id" />')),this.hiddenId=this.modalForm.querySelector('input[name="rey-request-quote-product-id"]'),this.assignId(),this.createdVariationData||(this.createVariationData(),this.createdVariationData=!0),this.setupCF7(),this.setupWPForms(),this.modal.classList.remove("--hidden"))))},this.open=function(){this.rqModal&&this.rqModal.open({width:550,type:"html",content:this.modalContent,wrapperClass:"rey-requestQuote-modalWrapper",id:"rq-"+this.id,closePosition:reycoreRequestQuoteParams.close_position})},this.variationsSetButtonState=function(){reycoreRequestQuoteParams.variation_aware&&(t.closest("li.product")||(this.PDPwrapper=t.closest("div.product"),this.PDPwrapper&&(this.variationsForm=this.PDPwrapper.querySelector(".variations_form"),this.variationsForm&&"undefined"!=typeof jQuery&&jQuery(this.variationsForm).on("hide_variation reset_data",(e=>{t.classList.add("--disabled")})).on("show_variation",(e=>{t.classList.remove("--disabled")})))))},this.createVariationData=function(){this.variationsForm&&rey.dom.children(this.variationsForm,"table.variations").length&&(this.selectLists=this.variationsForm.querySelectorAll("select[data-attribute_name]"),this.selectLists.length&&(this.productDataHolder=this.modal.querySelector(".rey-requestQuote-productData"),this.modalForm.append(rey.dom.createElementFromHTML('<input type="hidden" name="rey-request-quote-variation-data" />')),this.variationDataField=this.modalForm.querySelector('input[name="rey-request-quote-variation-data"]'),this.productDataHolder.append(rey.dom.createElementFromHTML('<span class="__variation-data"></span>')),this.variationDataContainer=this.productDataHolder.querySelector(".__variation-data"),this.updateVariationData()))},this.updateVariationData=function(){this.variationsForm&&this.selectLists.length&&(this.selectLists.forEach((t=>{var e=t.getAttribute("data-attribute_name"),a=this.variationsForm.querySelector('label[for="'+e.replace("attribute_","")+'"]');a&&(this.selectedAttributes[a.textContent]=t.value)})),rey.validation.isEmptyObject(this.selectedAttributes)||(Object.keys(this.selectedAttributes).forEach((t=>{var e=this.selectedAttributes[t],a=this.variationDataContainer.querySelector('.__aname[data-attr="'+t+'"]');if(a){var i=a.nextElementSibling;i&&i.classList.contains("__aval")&&(i.textContent=e)}else this.variationDataContainer.append(rey.dom.createElementFromHTML('<span class="__aname" data-attr="'+t+'">'+t+"</span>")),this.variationDataContainer.append(rey.dom.createElementFromHTML('<span class="__aval">'+e+"</span>"))})),this.variationDataField.value=JSON.stringify(this.selectedAttributes)))},this.handleCatalogButton=function(){var e=t.closest("li.product");if(e)return reycoreRequestQuoteParams.variation_aware&&e.classList.contains("product-type-variable")?(window.location.href=t.getAttribute("href"),!0):(this.open(),!0)},this.assignId=function(t){t=t||this.modal.getAttribute("data-id"),this.hiddenId.value=t},this.setupCF7=function(){if(!this.__setupCF7&&(this.__setupCF7=!0,"undefined"!=typeof wpcf7)){var t=this.modal.querySelector(".wpcf7-form");t&&(wpcf7.init(t),t.closest(".wpcf7").classList.replace("no-js","js"))}},this.setupWPForms=function(){this.__setupWPForms||(this.__setupWPForms=!0,"undefined"!=typeof wpforms&&this.modal.querySelector(".wpforms-form")&&(wpforms.ready(),"undefined"!=typeof wpformsModernFileUpload&&wpformsModernFileUpload.init(),"undefined"!=typeof wpformsRecaptchaLoad&&("recaptcha"===wpformsElementorVars.captcha_provider&&"v3"===wpformsElementorVars.recaptcha_type?"undefined"!=typeof grecaptcha&&grecaptcha.ready(wpformsRecaptchaLoad):wpformsRecaptchaLoad())))},this.init()},e=function(e){(e||document).querySelectorAll(".js-requestQuote").forEach((e=>{new t(e)}))};document.addEventListener("rey-DOMContentLoaded",(function(t){e()})),rey.hooks.addAction("ajaxfilters/finished",(function(t){e(t)})),rey.hooks.addAction("product/loaded",(function(t){t.forEach((t=>{e(t)}))})),rey.hooks.addAction("infinite/refresh",(function(t){e(t)})),rey.hooks.addAction("after_quickview_effect",(function(t){e(t)})),rey.hooks.addAction("elementor/element/lazy_loaded",(function(t){e(t)}))}();
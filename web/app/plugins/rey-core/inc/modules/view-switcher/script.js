!function(e){"use strict";var i=function(e){this.isMobileList=!1,this.init=function(){this.config=Object.assign({grid:null,lsSuffix:"",listSelector:""},e||{}),this.loopHeader=this.config.grid.parentElement.querySelector(".rey-loopHeader"),this.loopHeader&&(this.viewSelector=this.loopHeader.querySelector(".rey-viewSelector"),this.viewSelector&&(this.viewSelectorList=this.viewSelector.querySelector(this.config.listSelector),this.viewSelectorList&&(this.viewSelectorsChildren=this.viewSelectorList.querySelectorAll("li"),this.viewSelectorsChildren.length&&(this.lsName="rey-active-view-selector-"+reyParams.site_id+this.config.lsSuffix,this.cols=rey.util.ls.get(this.lsName),this.setDefaults(),this.changeCols(),this.events(),rey.hooks.doAction("view_selector/load",this)))))},this.setColsStyle=function(e){this.isReyGridElement=this.config.grid.closest(".elementor-widget-reycore-product-grid, .elementor-widget-reycore-woo-loop-products"),this.isReyGridElement&&this.config.grid.style.setProperty("--woocommerce-grid-columns",e?"":this.cols)},this.setDefaults=function(){this.colsAttribute="data-cols",this.defaultCols=reyParams.catalog_cols||4,rey.vars.is_mobile&&(this.defaultCols=reyParams.catalog_mobile_cols||2,this.colsAttribute="data-cols-mobile",this.isMobileList=this.config.grid.classList.contains("rey-wcGrid-mobile-listView"))},this.changeCols=function(){if(this.viewSelector.classList.contains("--is-visible")||this.viewSelector.classList.add("--is-visible"),this.config.grid.classList.contains("--vs-is-visible")||this.config.grid.classList.add("--vs-is-visible"),this.viewSelectorsChildren.forEach((e=>{e.classList.remove("is-active");var i=e.getAttribute("data-count");i&&parseInt(i)==(this.cols||this.defaultCols)&&e.classList.add("is-active")})),this.cols){if(this.isMobileList&&(1===parseInt(this.cols)?(this.config.grid.classList.add("rey-wcGrid-mobile-listView"),this.config.grid.querySelectorAll("li.product .woocommerce-loop-product__title").forEach((e=>{e.style.minHeight=""}))):this.config.grid.classList.remove("rey-wcGrid-mobile-listView")),this.config.grid.setAttribute(this.colsAttribute,this.cols),this.setColsStyle(),this.eProGridElement=this.config.grid.closest(".elementor-products-grid"),this.eProGridElement){var e=this.config.grid.closest(".woocommerce");e&&(e.classList.forEach((i=>{-1!==i.indexOf("columns-")&&e.classList.remove(i)})),e.classList.add("columns-"+this.cols)),this.eProGridElement.classList.forEach((e=>{-1!==e.indexOf("elementor-grid-")&&this.eProGridElement.classList.remove(e)})),this.eProGridElement.classList.add("elementor-grid-"+this.cols)}rey.hooks.doAction("view_selector/change_cols",this)}},this.events=function(){this.viewSelectorsChildren.forEach((e=>{e.addEventListener("click",(e=>{var i=e.currentTarget.getAttribute("data-count")||3;rey.util.ls.set(this.lsName,i,rey.util.expiration.day),this.cols=i,this.changeCols()}))})),window.addEventListener("rey/window/breakpoint",(()=>{this.setColsStyle(!0)}))},this.init()},t=function(e){(e=e||document).querySelectorAll(".woocommerce ul.products:not(.--prevent-change-cols)").forEach((e=>{rey.vars.is_desktop&&new i({grid:e,listSelector:".rey-viewSelector-list-dk"}),rey.vars.is_mobile&&new i({grid:e,lsSuffix:"-mobile",listSelector:".rey-viewSelector-list-mb"})}))};document.addEventListener("rey-DOMContentLoaded",(function(e){t()})),rey.hooks.addAction("ajaxfilters/finished",(function(e){t(e)}))}(jQuery);
!function(e){"use strict";var t=function(){var t=this;this.init=function(){this.$placeholder=e(".__placeholder-wrapper.rey-recentlyViewed"),this.$placeholder.length&&(this.product_id=rey.vars.page_id,this.product_id&&"undefined"!=typeof Cookies&&(this.canRunRequest()?rey.frontend.inView({target:this.$placeholder,once:!0,cb:function(){t.makeRequest()}}):this.$placeholder.remove()))},this.canRunRequest=function(){var e=Cookies.get("woocommerce_recently_viewed");if(e){var t=e.split("|").map((function(e){return parseInt(e)})),i=t.indexOf(this.product_id);if(-1!==i&&t.splice(i,1),t.length)return!0}},this.makeRequest=function(){rey.ajax.request("pdp_recent_products",{data:{id:this.product_id},cb:function(e){if(e.data){t.$placeholder.replaceWith(e.data);var i=document.querySelector(".rey-recentlyViewed");rey.hooks.doAction("product/loaded",i.querySelectorAll("li.product")),rey.hooks.doAction("woocommerce/carousel/loaded",i)}}})},this.init()};document.addEventListener("rey-DOMContentLoaded",(function(e){new t}))}(jQuery);
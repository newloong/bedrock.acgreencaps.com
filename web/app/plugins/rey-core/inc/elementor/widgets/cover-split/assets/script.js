!function(){"use strict";var t=function(t){this.logEnabled=!1,this.activeClass="--active",this.prevClass="--prev",this.currentSlide=0,this.slidesCount=0,this.interval=!1,this.videosHelper=!1,this.points={},this.init=function(){if(this.scope=t,this.slider=this.scope.querySelector(".rey-coverSplit"),!rey.util.alreadyLoaded(this.slider)){if(this.sliderWrapper=this.slider.parentElement,this.slides=this.slider.querySelectorAll(".cSplit-slide"),this.navItems=this.slider.querySelectorAll(".cSplit-navItem"),this.parentSection=this.slider.closest(".elementor-section.elementor-top-section, .e-con-top"),this.hasMainSlide=this.slider.classList.contains("--mainSlide"),this.canLightenHeader=rey.elements.body.classList.contains("csplit-light-header"),this.slidesCount=this.slides.length,this.settings=Object.assign({autoplay:!1,autoplayDuration:5e3,transitionDuration:500,scroll:!0,logo:"",logo_mobile:!1},JSON.parse(this.slider.getAttribute("data-slider-settings")||"{}")),this.slidesCount<=1)return this.settings.scroll=!1,void this.removeLoading();rey.vars.is_mobile&&(this.settings.scroll=!1),this.parentSection&&this.parentSection.classList.contains("rey-animate-el")&&rey.vars.is_desktop?rey.hooks.addAction("elementor_section/animation_complete",(t=>{t.settings.id==this.parentSection.getAttribute("data-id")&&this.removeLoading()})):this.removeLoading(),this.setupScrollPoints(),this.maybeToggleFixedHeader(),this.events()}},this.setupScrollPoints=function(){if(!this.settings.scroll)return;const t=parseInt(getComputedStyle(this.slider).height,10),e=parseInt(getComputedStyle(this.sliderWrapper).height,10),i=rey.dom.offset(this.sliderWrapper).top;this.points={start:i,end:i+e,slideScrollHeight:(e-t)/this.slidesCount,slideHeight:t,slidesPositions:{}};for(let t=0;t<this.slidesCount;t++)this.points.slidesPositions[t]=this.points.start+this.points.slideScrollHeight*t;this.log(this.points)},this.events=function(){let t=!1;window.addEventListener("scroll",(()=>{this.settings.scroll&&(t||(window.requestAnimationFrame((()=>{this.handleScroll(),t=!1})),t=!0))})),this.slider.querySelector(".rey-arrowSvg--left")?.addEventListener("click",(t=>{t.preventDefault(),this.activatePrev()})),this.slider.querySelector(".rey-arrowSvg--right")?.addEventListener("click",(t=>{t.preventDefault(),this.activateNext()})),this.slider.querySelectorAll(".cSplit-navItem span").forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault();var e=parseInt(t.currentTarget.parentElement.getAttribute("data-index"));this.settings.scroll?this.scrollToTarget(e):this.activateSlide(e)}))})),window.addEventListener("resize",rey.util.debounce((()=>{this.setupScrollPoints()}),400))},this.handleScroll=()=>{const t=window.scrollY;if(t>=this.points.start&&t<=this.points.end-this.points.slideHeight){const e=t-this.points.start,i=Math.floor(e/this.points.slideScrollHeight);i!==this.currentSlide&&this.activateSlide(i)}},this.scrollToTarget=function(t){window.scrollTo({top:this.points.slidesPositions[t],behavior:"smooth"})},this.activateSlide=function(t){t<0||t>=this.slidesCount||t===this.currentSlide||(this.resetAutoplay(),this.slides.forEach(((e,i)=>{e.classList.toggle(this.activeClass,i===t),e.classList.toggle(this.prevClass,i<t)})),this.navItems.forEach((e=>{e.classList.remove(this.activeClass),rey.dom.children(e.parentElement,`[data-index="${t}"]`).forEach((t=>{t.classList.add(this.activeClass)}))})),this.currentSlide=t,this.toggleHeaderColor(!(this.currentSlide>=1)),this.hasMainSlide&&this.slider.classList.toggle("--mainSlide-active",!(this.currentSlide>=1)))},this.activateNext=function(){this.currentSlide+1>=this.slidesCount||(this.settings.scroll?this.scrollToTarget(this.currentSlide+1):this.activateSlide(this.currentSlide+1))},this.activatePrev=function(){this.currentSlide-1<0||(this.settings.scroll?this.scrollToTarget(this.currentSlide-1):this.activateSlide(this.currentSlide-1))},this.autoplay=function(){this.settings.autoplay&&(this.interval=setInterval((()=>{this.currentSlide>=this.slidesCount-1?this.activateSlide(0):this.activateNext()}),parseInt(this.settings.autoplayDuration)+parseInt(this.settings.transitionDuration)))},this.resetAutoplay=function(){this.settings.autoplay&&this.interval&&(clearInterval(this.interval),this.autoplay())},this.removeLoading=function(){this.slider.querySelector(".rey-background-video-container")&&void 0!==rey.components.videoHelper&&(this.videosHelper=rey.components.videoHelper({containers:[this.slider],lazyLoad:!1}),this.videosHelper.init()),this.slider.classList.remove("--loading"),this.slides[0].classList.add("--active"),this.navItems.length&&this.navItems[0].classList.add("--active"),this.slider.querySelectorAll(".cSplit-slide--mainBg, .cSplit-halfRight-img").forEach((t=>{t.style.backfaceVisibility="hidden"})),this.autoplay()},this.toggleHeaderColor=function(t){this.canLightenHeader&&rey.elements.body.classList.toggle("csplit-light-header",!0===t)},this.maybeToggleFixedHeader=function(){if(!rey.elements.body.classList.contains("csplit-toggle-fixed"))return;this.maybeSwapLogo(),this.handleStickyTopContent();new IntersectionObserver((t=>{t.forEach((t=>{rey.elements.header.style.position=t.isIntersecting?"fixed":"absolute",rey.elements.header.style.top=t.isIntersecting?rey.vars.adminBar+"px":0}))}),{root:null,threshold:.1}).observe(this.slider)},this.handleStickyTopContent=function(){const t=document.querySelector('.rey-stickyContent[data-align="top"]');t&&(t.setAttribute("data-offset",this.points.end),document.dispatchEvent(new CustomEvent("rey/stickyContent/getOffsets")))},this.maybeSwapLogo=function(){if(this.canLightenHeader&&(rey.vars.is_desktop||this.settings.logo_mobile)&&this.settings.logo&&rey.elements.header){var t=rey.elements.header.querySelector(".rey-logoWrapper .rey-siteLogo img");if(t){t.classList.add("--swapper-main");var e=t.cloneNode(!0);e.setAttribute("src",this.settings.logo),e.setAttribute("class","--swapper"),e.setAttribute("srcset",""),e.setAttribute("sizes",""),t.after(e)}}},this.log=function(t){this.logEnabled&&t&&console.log(t)},this.init()},e=()=>{document.querySelectorAll(".elementor-widget-reycore-cover-split").forEach((e=>{new t(e)}))};document.addEventListener("DOMContentLoaded",(()=>{"undefined"!=typeof rey?e():console.error("`rey` is undefined so this script will not run.")})),document.addEventListener("rey/preloader/loaded",(function(){e()})),rey.hooks.addAction("elementor/init",(function(e){e.registerElement({name:"reycore-cover-split.default",cb:function(e){new t(e[0])}})}))}();
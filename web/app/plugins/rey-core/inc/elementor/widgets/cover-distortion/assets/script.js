!function(t){"use strict";var i=function(i){var e=this;this.activeSlide=0,this.totalSlides=0,this.settings={},this.elements={},this.isAnimating=!1,this.isInit=!1,this.interval=!1,this.timeline=void 0,this.sliderImages=[],this.activeCssClass="--active",this.init=function(){"undefined"!=typeof THREE&&"undefined"!=typeof anime&&"undefined"!==t.reyDistortionApp&&(this.$el=t(".rey-coverDistortion",i),rey.util.alreadyLoaded(this.$el[0])||(this.elements.$slidesContainer=t(".cDistortion-slides",this.$el),this.elements.$imgSlides=this.elements.$slidesContainer.children("img"),this.slides=JSON.parse(e.$el.attr("data-images")||"{}"),this.totalSlides=this.slides.length,this.totalSlides<2||(this.settings=t.extend({autoplay:!1,autoplayDuration:5e3,transitionDuration:1600,intensity1:.8,intensity2:.8,effect:"",easing:"easeInOutCubic",vertical:!0,scaleEffect:!1},JSON.parse(this.$el.attr("data-slider-settings")||"{}")),this.settings.autoplayDuration=parseInt(this.settings.autoplayDuration||5e3),this.settings.transitionDuration=parseInt(this.settings.transitionDuration),this.settings.intensity1=parseFloat(this.settings.intensity1),this.settings.intensity2=parseFloat(this.settings.intensity2),"random"===this.settings.effect?this.settings.effect=reyThreeConfig.displacements[rey.util.getRandomInt(15)]:""!==this.settings.effect&&(this.settings.effect=reyThreeConfig.displacements[this.settings.effect]),this.elements.$captions=t(".cDistortion-captionItem",this.$el),this.elements.$captions.eq(this.activeSlide).addClass(this.activeCssClass),this.settings.delay?rey.___.firstInteractionHappened?this.preInit():rey.hooks.addAction("first_interaction",this.preInit):this.preInit())))},this.preInit=()=>{this.activateSlider(),this.events()},this.activateSlider=function(){this.elements.$slideBg=t(".cDistortion-slidesBg",this.$el),this.elements.$prevArrow=t(".cDistortion-navPrev",this.$el),this.elements.$nextArrow=t(".cDistortion-navNext",this.$el),this.elements.$bullets=t(".cDistortion-navBullets button",this.$el),this.elements.$canvasWrapper=t(".cDistortion-canvasWrapper",this.$el);var i=this.elements.$imgSlides[0];this.imgWidth=parseInt(i.getAttribute("width")||1440),this.imgHeight=parseInt(i.getAttribute("height")||810),this.distortionApp=new ReyDistortionApp({imgWidth:this.imgWidth,imgHeight:this.imgHeight,effect:this.settings.effect,intensity1:this.settings.intensity1,intensity2:this.settings.intensity2,vertical:this.settings.vertical,$images:this.slides,$el:this.$el}),this.elements.$canvasWrapper.append(this.distortionApp.renderer.domElement),this.elements.$canvas=t("canvas",this.$el),this.addTimeline()},this.events=function(){var i,e=this;(this.$el.on("rey:distortion-app:init",(()=>{this.$el.removeClass("--loading"),this.settings.replay_first&&this.animateTo(this.activeSlide),setTimeout((()=>{this.autoplay(),this.isInit=!0}),1e3)})),this.elements.$nextArrow.on("click",(function(t){t.preventDefault(),e.goToNext()})),this.elements.$prevArrow.on("click",(function(t){t.preventDefault(),e.goToPrev()})),this.elements.$bullets.on("click",(function(i){if(i.preventDefault(),!e.isAnimating){var s=parseInt(t(this).attr("data-index")),n=1;s!==e.activeSlide&&(s<e.activeSlide&&(n=-1),e.animateTo(s,n))}})),t(document).on("keyup",(function(t){var i=t.keyCode||t.which;37===i?e.goToPrev():39===i&&e.goToNext()})),rey&&rey.vars.is_touch_device())&&(this.$el.on("touchstart",(function(t){i=t.originalEvent.touches[0].clientX})),this.$el.on("touchend",(function(t){var s=t.originalEvent.changedTouches[0].clientX;i>s?e.goToPrev():e.goToNext()})))},this.autoplay=function(){var t=this;this.settings.autoplay&&(this.interval=setInterval((function(){t.goToNext()}),this.settings.autoplayDuration+this.settings.transitionDuration))},this.resetAutoplay=function(){this.settings.autoplay&&this.interval&&(clearInterval(this.interval),this.autoplay())},this.goToNext=function(){if(!this.isAnimating){var t=this.activeSlide+1;this.activeSlide===this.totalSlides-1&&(t=0),this.animateTo(t,1)}},this.goToPrev=function(){if(!this.isAnimating){var t=this.activeSlide-1;0===this.activeSlide&&(t=this.totalSlides-1),this.animateTo(t,-1)}},this.animateTo=function(t,i){var e=this;this.resetAutoplay(),this.onAnimationStart=function(){e.isAnimating=!0,e.distortionApp.animationStart(t,i),e.activeSlide=t,e.activateBg(),e.activateBullet(),e.activateCaption()},this.onAnimationEnd=function(){e.distortionApp.animationEnd(t),e.isAnimating=!1},this.timeline&&this.timeline.play()},this.addTimeline=function(){var t=this;this.timeline=anime.timeline({autoplay:!1,begin:function(i){t.onAnimationStart()},complete:function(i){t.onAnimationEnd()}});var i="";if(this.settings.scaleEffect){i="-=500";this.timeline.add({targets:this.elements.$canvasWrapper[0],scale:[1,1.03],easing:"easeOutSine",duration:300})}this.timeline.add({targets:t.distortionApp.mat.uniforms.dispFactor,value:1,easing:this.settings.easing,duration:this.settings.transitionDuration},i),this.settings.scaleEffect&&this.timeline.add({targets:this.elements.$canvasWrapper[0],scale:[1.03,1],easing:"easeOutCirc",duration:2e3},"-="+this.settings.transitionDuration/4)},this.activateBullet=function(){this.elements.$bullets.removeClass(this.activeCssClass),this.elements.$bullets.eq(this.activeSlide).addClass(this.activeCssClass)},this.activateCaption=function(){this.elements.$captions.removeClass(this.activeCssClass),setTimeout((()=>{this.elements.$captions.eq(this.activeSlide).addClass(this.activeCssClass)}),this.settings.transitionDuration/4)},this.activateBg=function(){this.$el.css({"transition-duration":this.settings.transitionDuration/2+"ms",color:this.slides[this.activeSlide].color}),this.elements.$slideBg.css({"background-color":this.slides[this.activeSlide]["bg-color"],"transition-duration":this.settings.transitionDuration/2+"ms"})},this.init()};document.addEventListener("rey-DOMContentLoaded",(function(){})),document.addEventListener("rey/preloader/loaded",(function(){t(".elementor-widget-reycore-cover-distortion").each((function(e,s){new i(t(s))}))})),rey.hooks.addAction("elementor/init",(function(t){t.registerElement({name:"reycore-cover-distortion.default",cb:function(t){new i(t)}})}))}(jQuery);
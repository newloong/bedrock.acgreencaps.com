!function(t){"use strict";var e={settings:{},elements:{},timeline:!1,init:function(e){"undefined"!=typeof THREE&&"undefined"!=typeof anime&&"undefined"!==ReyDistortionApp&&(this.$el=e,this.elements.$parentSection=this.$el.closest(".elementor-top-section"),this.elements.$imageContainer=t(".hbDist-imgs",this.$el),this.images=JSON.parse(this.$el.attr("data-images")||"{}"),this.totalImages=this.images.length,this.totalImages<2||(this.settings=t.extend({transitionDuration:1200,intensity1:.8,intensity2:"",effect:"",easing:"easeInOutCubic",vertical:!1},JSON.parse(this.$el.attr("data-box-settings")||"{}")),this.settings.transitionDuration=parseInt(this.settings.transitionDuration),this.settings.intensity1=parseFloat(this.settings.intensity1),""===this.settings.intensity2?this.settings.intensity2=this.settings.intensity1:this.settings.intensity2=parseFloat(this.settings.intensity2),"random"===this.settings.effect?this.settings.effect=reyThreeConfig.displacements[rey.util.getRandomInt(15)]:""!==this.settings.effect&&(this.settings.effect=reyThreeConfig.displacements[this.settings.effect]),rey.hooks.addAction("first_interaction",(()=>{this.activateBox()}))))},activateBox:function(){this.elements.$overlayBg=t(".hbDist-imgsBg",this.$el),this.elements.$captions=t(".cDistortion-captionItem",this.$el);var e=this.elements.$imageContainer.children("img, picture").first();this.imgWidth=parseInt(e.attr("width")||1e3),this.imgHeight=parseInt(e.attr("height")||1e3),this.distortionApp=new ReyDistortionApp({imgWidth:this.imgWidth,imgHeight:this.imgHeight,effect:this.settings.effect,intensity1:this.settings.intensity1,intensity2:this.settings.intensity2,vertical:this.settings.vertical,$images:this.images,nextImage:1,$el:this.$el}),this.$el.append(this.distortionApp.renderer.domElement),rey.frontend.inView({target:this.$el[0],cb:t=>{this.createTimeline(),this.events()},once:!0})},events:function(){var t=this;this.$el.on("mouseenter",(function(e){t.timeline&&(t.timeline.reversed&&t.timeline.reverse(),t.timeline.play())})),this.$el.on("mouseleave",(function(e){t.timeline&&(t.timeline.reversed||(t.timeline.reverse(),t.timeline.completed=!1),t.timeline.play())}))},createTimeline:function(){this.timeline=anime.timeline({autoplay:!1}),this.timeline.add({targets:this.distortionApp.mat.uniforms.dispFactor,value:1,easing:this.settings.easing,duration:this.settings.transitionDuration})},activateCaption:function(){var t=this;this.elements.$captions.removeClass(this.activeCssClass),setTimeout((function(){t.elements.$captions.eq(t.activeSlide).addClass(t.activeCssClass)}),this.settings.transitionDuration/4)}};rey.hooks.addAction("elementor/init",(function(i){i.registerElement({name:"reycore-hoverbox-distortion.default",cb:function(i){var s=Object.create(e),n=t(".rey-hoverBox[data-box-settings]",i);n.length&&s.init(n)}})}))}(jQuery);
!function(e){"use strict";var t=function(t,a){this.$backBtn=!1,this.init=function(){this.$scope=t,this.$nav=e(".reyEl-fancyMenu",this.$scope),this.$parentNav=e(".reyEl-fancyMenu-nav",this.$scope),this.depth=this.$nav.attr("data-depth")||20,this.makeHeight(),this.addBacks(),this.a11y(),this.createSubmenuIndicators(),this.events()},this.events=function(){var t=this;e(".menu-item.menu-item-has-children > a",this.$nav).on("click",(function(a){var n=e(this);n.siblings().length&&(a.preventDefault(),e("ul.--start",t.$nav).removeClass("--start"),n.closest("ul").addClass("--back"),n.next("ul").addClass("--start"),t.$nav.css("height",n.nextAll("ul").outerHeight()+"px"))})),e(".reyEl-fancyMenu-back",this.$parentNav).on("click",(function(a){a.preventDefault();var n=e(this);n.closest(".--start").removeClass("--start"),n.closest(".--back").removeClass("--back").addClass("--start"),t.$nav.css("height",e("ul.--start",t.$nav).outerHeight())})),rey.hooks.addAction("offcanvas_panel/open",(()=>{this.makeHeight()}))},this.makeHeight=function(){this.$nav.css("height",e("ul.--start",this.$nav).outerHeight())},this.a11y=function(){var t=this;this.$popupItems=e(".menu-item-has-children",this.$nav),this.$popupItems.attr({"aria-haspopup":"true","aria-expanded":"false"}),e(".sub-menu a, .reyEl-fancyMenu-back",this.$popupItems).attr("tabindex","-1"),e(document).on("keydown",(function(n){if(9!==n.keyCode){if(-1!==[13,32].indexOf(n.keyCode)){var i=e('.menu-item[aria-haspopup="true"] > a:focus',t.$nav).parent("li");i.length&&(n.preventDefault(),i.each((function(t,a){e(a).attr("aria-expanded","true").children("a").trigger("click"),e("> .sub-menu > li > a, > .sub-menu > .reyEl-fancyMenu-back",a).removeAttr("tabindex")})));var s=e(".reyEl-fancyMenu-back:focus",t.$nav);s.length&&a(s)}27==n.keyCode&&a()}}));var a=function(a){if(a)var n=a.closest('.menu-item[aria-haspopup="true"][aria-expanded="true"]');else n=e('.menu-item[aria-haspopup="true"][aria-expanded="true"]',t.$nav);n.length&&(e("> .sub-menu > .reyEl-fancyMenu-back",n).trigger("click"),n.attr("aria-expanded","false"),e(".sub-menu a, .sub-menu .reyEl-fancyMenu-back",n).attr("tabindex","-1"),n.children("a").trigger("focus"))}},this.addBacks=function(){var t=this.$nav.children(".reyEl-fancyMenu-back");t.length&&e(".sub-menu",this.$parentNav).each((function(a,n){e(n).children(".reyEl-fancyMenu-back").length||t.clone().appendTo(n)}))},this.createSubmenuIndicators=function(){var t,a=this,n=this.$nav.attr("data-indicator");if(n){rey&&("yes"===n&&(t=rey.frontend.svgIcon.get("play")),"chevron"===n&&(t=rey.frontend.svgIcon.get("arrow")),e.each(e(".menu-item-has-children > a",a.$nav),(function(a,n){var i=e(n);i.siblings().length&&e('<i class="--submenu-indicator">'+t+"</i>").appendTo(i)})))}},this.init()};rey.hooks.addAction("elementor/init",(function(e){e.registerElement({name:"reycore-menu-fancy.default",cb:function(e){new t(e,"default")}})})),rey.hooks.addAction("fullscreen_nav/loaded",(function(a){"menu"===a.type&&new t(e(document),"default")}))}(jQuery);